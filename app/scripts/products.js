var tableData = [
  {
    img: "images/product_20.png",
    title: "OHUI",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_20.png",
    title: "OHUI",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },

  {
    img: "images/product_20.png",
    title: "OHUIbbbb",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_20.png",
    title: "OHUI",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },

  {
    img: "images/product_20.png",
    title: "OHUIaaaaa",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_20.png",
    title: "OHUI",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },

  {
    img: "images/product_20.png",
    title: "OHUIccccc",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_20.png",
    title: "OHUI",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_21.png",
    title: "home",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
  {
    img: "images/product_22.png",
    title: "debora",
    name: "Mỹ phẩm châu Âu",
    price: "355.000",
    price_sale: "450.000",
    rating: 5,
    quantity: 4,
    desc:
      "Tự hào được ghi là năm mà Tiffany & Co là thành lập, bộ sưu tập mang tính biểu tượng này cung cấp cho một cái gật đầu với qua trong khi thể hiện một cảm giác hiện đại với kiểu dáng đẹp đường cong và đường nét mượt mà.",
  },
];

var state = {
  querySet: tableData,

  page: 1,
  rows: 6,
  window: 3,
  active: 1,
};

let w = $("body").width();
if (w < 575) {
  state.rows = 4;
  buildTable();
} else {
  state.rows = 6;
  buildTable();
}

const list = $(".list");
const grid = $(".grid");
const product_show = $(".product-show");

list.on("click", function () {
  grid.removeClass("active");
  list.addClass("active");

  state.rows = 3;
  product_show.addClass("list-show");
  $("#product-show").empty();
  buildTable();
});

grid.on("click", function () {
  list.removeClass("active");
  grid.addClass("active");
  if (w < 575) {
    state.rows = 4;
  } else {
    state.rows = 6;
  }

  let pageMax = state.querySet.length / state.rows;
  if (state.page > pageMax) {
    state.page = pageMax;
    state.active = pageMax;
  }

  product_show.removeClass("list-show");
  $("#product-show").empty();
  buildTable();
});

function pagination(querySet, page, rows) {
  var trimStart = (page - 1) * rows;
  var trimEnd = trimStart + rows;

  var trimmedData = querySet.slice(trimStart, trimEnd);

  var pages = Math.round(querySet.length / rows);

  return {
    querySet: trimmedData,
    pages: pages,
  };
}

function pageButtons(pages) {
  var wrapper = $(".pagination-wrapper");

  var maxLeft = state.page - Math.floor(state.window / 2);
  var maxRight = state.page + Math.floor(state.window / 2);

  if (maxLeft < 1) {
    maxLeft = 1;
    maxRight = state.window;
  }

  if (maxRight > pages) {
    maxLeft = pages - (state.window - 1);

    if (maxLeft < 1) {
      maxLeft = 1;
    }
    maxRight = pages;
  }

  let pageShow = "";

  for (var page = maxLeft; page <= maxRight; page++) {
    pageShow += `<button value=${page} class=" page btn page-number ${
      page === state.active ? "active" : ""
    }">${page}</button>`;
  }

  wrapper.html(pageShow);

  if (state.page !== 1) {
    wrapper.html(
      `<button value=${1} class="page btn"><i class="fas fa-caret-left"></i></button>` +
        wrapper.html()
    );
  }

  if (state.page !== pages) {
    wrapper.html(
      wrapper.html() +
        `<button value=${pages} class="page btn"><i class="fas fa-caret-right"></i></button>`
    );
  }

  $(".page").on("click", function () {
    $("#product-show").empty();

    state.page = Number($(this).val());
    state.active = state.page;

    buildTable();
  });
}

function buildTable() {
  var show_item = $("#product-show");
  var data = pagination(state.querySet, state.page, state.rows);
  var myList = data.querySet;
  for (let i = 0; i < myList.length; i++) {
    var item = `<div class="product-show__item">
          <div class="item__img"><img src="${myList[i].img}" alt="product"></div>
          <div class="item__content">
            <p class="item__title">${myList[i].title}</p>
            <p class="item__name">${myList[i].name}</p>
            <div class="item__rating">
                <ul class="rating__list">
                  <li class="rating__item"><i class="fas fa-heart"></i></li>
                  <li class="rating__item"><i class="fas fa-heart"></i></li>
                  <li class="rating__item"><i class="fas fa-heart"></i></li>
                  <li class="rating__item"><i class="fas fa-heart"></i></li>
                  <li class="rating__item"><i class="fas fa-heart"></i></li>
                </ul>
                <p class="quantity">(4 lượt mua)</p>
            </div>
            <p class="item__desc">${myList[i].desc}</p>
            <div class="line"></div>
            <div class="item__price">
              <p>${myList[i].price}<span>đ</span></p>
              <p class="price-sale">${myList[i].price_sale}<span>đ</span></p>
            </div>
            <div class="item__btn">
              <button class="btn btn--green btn--border"><span class="icon-text">Mua hàng</span></button>
              <button class="btn btn--green btn--border"> <i class="fas fa-heart"></i></button>
              <button class="btn btn--green btn--border"><i class="fas fa-sync-alt"></i></button>
            </div>
          </div>
        </div>
                        `;
    show_item.append(item);
  }

  pageButtons(data.pages);
}
