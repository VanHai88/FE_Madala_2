var tableData = [
  {
    img: "/images/blog_1.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_2.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_3.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_4.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_5.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_6.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_7.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_8.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_9.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_7.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_8.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_9.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_1.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_2.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_3.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_7.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_8.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_9.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_4.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_5.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_6.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_1.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_2.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
  {
    img: "/images/blog_3.png",
    name: "Review son kem bourjois velvet",
    desc:
      "Hi, chào các nàng ... sau khá nhiều lời hứa hão thì hôm nay tớ quay lại hăm nóng cái Blog này vào một ngày đầu hè nóng oi bức, khi mà dân tình xô nhau đi tắm Free để giải nhiệt.",
    author: "Bởi NamTran ( 27 / 05 / 2015 )",
    comment_number: 23,
  },
];

var state = {
  querySet: tableData,

  page: 1,
  rows: 9,
  window: 3,
  active: 1,
};

let w = $("body").width();
if (w < 575) {
  state.rows = 3;
  buildTable();
} else if (w < 991) {
  state.rows = 6;
  buildTable();
} else {
  state.rows = 9;
  buildTable();
}

function pagination(querySet, page, rows) {
  var trimStart = (page - 1) * rows;
  var trimEnd = trimStart + rows;

  var trimmedData = querySet.slice(trimStart, trimEnd);

  var pages = Math.round(querySet.length / rows);

  return {
    querySet: trimmedData,
    pages: pages,
  };
}

function pageButtons(pages) {
  var wrapper = $(".pagination-wrapper");

  var maxLeft = state.page - Math.floor(state.window / 2);
  var maxRight = state.page + Math.floor(state.window / 2);

  if (maxLeft < 1) {
    maxLeft = 1;
    maxRight = state.window;
  }

  if (maxRight > pages) {
    maxLeft = pages - (state.window - 1);

    if (maxLeft < 1) {
      maxLeft = 1;
    }
    maxRight = pages;
  }

  let pageShow = "";

  for (var page = maxLeft; page <= maxRight; page++) {
    pageShow += `<button value=${page} class=" page btn page-number ${
      page === state.active ? "active" : ""
    }">${page}</button>`;
  }

  wrapper.html(pageShow);

  if (state.page !== 1) {
    wrapper.html(
      `<button value=${1} class="page btn"><i class="fas fa-caret-left"></i></button>` +
        wrapper.html()
    );
  }

  if (state.page !== pages) {
    wrapper.html(
      wrapper.html() +
        `<button value=${pages} class="page btn"><i class="fas fa-caret-right"></i></button>`
    );
  }

  $(".page").on("click", function () {
    $("#blog-show").empty();

    state.page = Number($(this).val());
    state.active = state.page;

    buildTable();
  });
}

function buildTable() {
  var show_item = $("#blog-show");
  var data = pagination(state.querySet, state.page, state.rows);
  var myList = data.querySet;
  for (let i = 0; i < myList.length; i++) {
    var item = `<div class="blog-show__item">
    <div class="item__img"><a href="/blog-detail.html"><img src=${myList[i].img} alt="blog"></a></div>
    <div class="item__content">
      <a class="item__name" href="/blog-detail.html">${myList[i].name}</a>
      <p class="item__desc">${myList[i].desc}</p>
      <a class="item__author" href="#">${myList[i].author}</a>
      <div class="item__detail"><a class="detail__read" href="#">Đọc thêm<i class="fas fa-angle-right"></i></a><a class="detail__comment" href="#">${myList[i].comment_number} Bình luận</a></div>
    </div>
  </div>
                          `;
    show_item.append(item);
  }

  pageButtons(data.pages);
}
